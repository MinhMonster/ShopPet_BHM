"use strict";(self["webpackChunkvue_router"]=self["webpackChunkvue_router"]||[]).push([[352],{2352:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"body"},[e("section",{attrs:{id:"main-body"}},[e("div",{staticClass:"container bg-white mgt--20px"},[e("div",{staticClass:"panel-body flex-row-space-between-center"},[e("div",{staticClass:"btn"},[e("button",{staticClass:"btn btn-primary text-white"},[e("router-link",{attrs:{to:"/admin/management/products"}},[t._v("Product")])],1)]),e("div",{staticClass:"btn"},[e("button",{staticClass:"btn btn-primary text-white"},[e("router-link",{attrs:{to:"/admin/management/products/create"}},[t._v("Add New")])],1),e("button",{staticClass:"btn btn-info btn-sm mgl-10px text-white",on:{click:function(e){t.showFilter=!t.showFilter}}},[e("i",{staticClass:"fa fa-search"})])])]),t.showFilter?e("div",{staticClass:"filter flex-row-space-between-center"},[e("div",{staticClass:"search-wrapper"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search.name,expression:"search.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search Name"},domProps:{value:t.search.name},on:{input:function(e){e.target.composing||t.$set(t.search,"name",e.target.value)}}})]),e("div",{staticClass:"col-md-3"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.search.minprice,expression:"search.minprice",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"Min Price"},domProps:{value:t.search.minprice},on:{input:function(e){e.target.composing||t.$set(t.search,"minprice",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),e("div",{staticClass:"col-md-3"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.search.maxprice,expression:"search.maxprice",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"Max Price.."},domProps:{value:t.search.maxprice},on:{input:function(e){e.target.composing||t.$set(t.search,"maxprice",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),e("div",{staticClass:"col-md-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search.author,expression:"search.author"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Author"},domProps:{value:t.search.author},on:{input:function(e){e.target.composing||t.$set(t.search,"author",e.target.value)}}})])])])]):t._e(),e("div",{staticClass:"card-deck mb-3 text-center scroll-x"},[e("table",{staticClass:"table table-primary table-bdrs-5px"},[e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#")]),e("th",{attrs:{scope:"col"}},[t._v("Product name")]),e("th",{attrs:{scope:"col"},on:{click:function(e){return t.changeCurrentDir()}}},[t._v("Price")]),e("th",{attrs:{scope:"col"}},[t._v("Quantity")]),e("th",{attrs:{scope:"col"}},[t._v("Author")]),e("th",{attrs:{scope:"col"}},[t._v("Time")]),e("th",{attrs:{scope:"col"}},[t._v("Action")])])]),e("tbody",t._l(t.List,(function(a,r){return e("tr",{key:r},[e("td",{attrs:{scope:"row"}},[t._v(t._s(a.pid))]),e("td",[t._v(t._s(a.name))]),e("td",[t._v(t._s(a.price))]),e("td",[t._v(t._s(a.quantity))]),e("td",[t._v(t._s(a.author))]),e("td",[t._v(t._s(a.time))]),e("td",{staticClass:"gap-10px"},[e("router-link",{attrs:{to:{name:"admin.management.products.edit",params:{id:a.id}}}},[e("b-button",{attrs:{variant:"primary"}},[e("i",{staticClass:"fa fa-edit"})])],1),e("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onDelete(a.id)}}},[e("i",{staticClass:"fa fa-trash"})])],1)])})),0)])]),this.page.count>1?e("div",{staticClass:"panel-footer"},[e("paginate",{attrs:{"page-count":this.page.count,"page-range":3,"margin-pages":2,"click-handler":t.clickCallback,"prev-text":"<<","next-text":">>","container-class":"pagination","page-class":"page-item"},model:{value:t.params.page,callback:function(e){t.$set(t.params,"page",e)},expression:"params.page"}})],1):t._e()])])])},s=[],i=a(2806),o=a.n(i),c={name:"ProductForm",components:{Paginate:o()},data(){return{search:{author:"",name:"",minprice:"",maxprice:""},products:[],page:{pageCount:0,count:1,per_page:5},currentSort:"time",currentSortDir:1,title:"product",showFilter:!1,filters:["id","name","price","time"],nPage:[],operators:{equal_to:"=",less_than:"<",greater_than:">",like:"LIKE",in:"IN",not_in:"NOT_IN",between:"BETWEEN"},params:{page:1,per_page:1,sort_column:"id",direction:"desc",search_column:"id",search_operator:"equal_to",search_query_1:"",search_query_2:""}}},props:{},created(){this.getAll()},mounted(){},methods:{clickCallback(t){this.page.pageCount=t-1},prev(){this.model.prev_page_url&&(this.params.page--,this.getAll())},next(){this.model.next_page_url&&(this.params.page--,this.getAll())},async getAll(){await this.$request.get(this.builUrl()).then((t=>{this.products=t.data,this.products=this.products.reverse()}))},builUrl(){return"http://localhost:8000/api/products"},onDelete(t){this.$swal.fire({title:"Delete?",text:"You won't be able to revert this!",icon:"question",type:"warning",showDenyButton:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel please!",timer:5e3}).then((e=>{e.isConfirmed&&this.$request.delete(`http://localhost:8000/api/products/${t}`).then((t=>{t.data.success&&(this.$swal.fire("Đã Xóa","","success"),this.getAll())}))}))},sort:function(t){t===this.currentSort&&(this.currentSortDir="asc"===this.currentSortDir?"desc":"asc"),this.currentSort=t},changeCurrentDir(){this.currentSortDir=-this.currentSortDir}},watch:{currentSortDir(t){console.log(this.products),this.products.sort(((t,e)=>this.currentSortDir))}},computed:{getFilter(){return this.products.filter((t=>""===this.search.minprice&&""===this.search.maxprice?t.name.toLowerCase().includes(this.search.name.toLowerCase())&&t.author.toLowerCase().includes(this.search.author.toLowerCase())&&t.price>=0:""!=this.search.minprice&&""===this.search.maxprice?t.name.toLowerCase().includes(this.search.name.toLowerCase())&&t.author.toLowerCase().includes(this.search.author.toLowerCase())&&t.price>=this.search.minprice:""===this.search.minprice&&""!=this.search.maxprice?t.name.toLowerCase().includes(this.search.name.toLowerCase())&&t.author.toLowerCase().includes(this.search.author.toLowerCase())&&t.price>=0&&t.price<=this.search.maxprice:""!=this.minprice&&""!=this.maxprice?t.name.toLowerCase().includes(this.search.name.toLowerCase())&&t.author.toLowerCase().includes(this.search.author.toLowerCase())&&t.price>=this.search.minprice&&t.price<=this.search.maxprice:void 0))},List(){return this.getFilter.length%this.page.per_page===0?this.page.count=Math.floor(this.getFilter.length/this.page.per_page):this.getFilter.length<=this.page.per_page?(this.page.count=Math.floor(this.getFilter.length/this.page.per_page+1),this.page.pageCount=0):this.page.pageCount>this.page.count-1?(this.page.count=Math.floor(this.getFilter.length/this.page.per_page)+1,this.page.pageCount=0):this.page.count=Math.floor(this.getFilter.length/this.page.per_page+1),this.getFilter.slice(this.page.per_page*this.page.pageCount,this.page.per_page*(this.page.pageCount+1))}}},n=c,l=a(3736),p=(0,l.Z)(n,r,s,!1,null,null,null),h=p.exports}}]);
//# sourceMappingURL=352.b5a74b26.js.map